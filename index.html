<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>八卦象数疗法检索</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:-apple-system,BlinkMacSystemFont,'PingFang SC',sans-serif;margin:0;background:#f5f7fb}
.header{padding:20px;text-align:center;font-size:24px;font-weight:600}
.search-box{display:flex;justify-content:center;gap:10px;padding:10px}
input{width:70%;padding:10px;border-radius:20px;border:1px solid #ccc}
button{padding:10px 18px;border:none;border-radius:20px;background:#2b6cff;color:#fff}
.tabs{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;padding:15px}
.tab{background:#fff;border-radius:10px;padding:10px;text-align:center;cursor:pointer}
.tab.active{background:#2b6cff;color:#fff}
.list{padding:15px}
.item{background:#fff;margin-bottom:10px;padding:10px;border-radius:10px}
.title{font-weight:bold}
.formula{color:#d33;margin:5px 0}
</style>
</head>
<body>
<div class="header">八卦象数疗法检索</div>
<div class="search-box">
  <input id="search" placeholder="输入症状或配方数字...">
  <button onclick="render()">搜索</button>
</div>
<div class="tabs" id="tabs"></div>
<div class="list" id="list"></div>

<script>
let data = [];
let currentCategory = "全部";
const categories = ["全部","通用配方","神经类配方","头部和皮肤配方","呼吸系统配方","发烧感冒配方","手部配方","肝肾胆肺部配方","心脏血管糖尿病配方","腹部配方","脾胃配方","妇科配方","儿科配方","骨科配方","痛风、关节炎配方"];

fetch("data.json").then(r=>r.json()).then(d=>{
  data=d;
  initTabs();
  render();
});

function initTabs(){
  const box=document.getElementById("tabs");
  categories.forEach(c=>{
    const div=document.createElement("div");
    div.className="tab"+(c==="全部"?" active":"");
    div.innerText=c;
    div.onclick=()=>{
      document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
      div.classList.add("active");
      currentCategory=c;
      render();
    };
    box.appendChild(div);
  });
}

function render(){
  const key=document.getElementById("search").value.trim();
  let list=data.filter(d=>
    (currentCategory==="全部"||d.category===currentCategory) &&
    (d.title.includes(key)||d.formula.includes(key)||d.content.includes(key))
  );
  const box=document.getElementById("list");
  box.innerHTML = "<div>共 "+list.length+" 条配方</div>";
  list.forEach(d=>{
    const div=document.createElement("div");
    div.className="item";
    div.innerHTML=`<div class="title">${d.title}</div>
                   <div class="formula">${d.formula}</div>
                   <div>${d.content}</div>`;
    box.appendChild(div);
  });
}
</script>
</body>
</html>
